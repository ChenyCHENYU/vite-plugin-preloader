# ğŸš€ vite-plugin-preloader

æ™ºèƒ½è·¯ç”±é¢„åŠ è½½ Vite æ’ä»¶ï¼Œä¸€è¡Œé…ç½®ï¼Œæè‡´æ€§èƒ½ï¼

## âœ¨ ç‰¹æ€§

- ğŸ¯ **ä¸€è¡Œé…ç½®** - åœ¨ `vite.config.js` ä¸­é…ç½®å³å¯
- âš¡ **é›¶è¿è¡Œæ—¶å¼€é”€** - æ„å»ºæ—¶ç”Ÿæˆï¼Œè¿è¡Œæ—¶é«˜æ•ˆ
- ğŸ¨ **è‡ªåŠ¨æ³¨å…¥** - æ— éœ€æ‰‹åŠ¨è°ƒç”¨ï¼Œå…¨è‡ªåŠ¨å·¥ä½œ
- ğŸ› ï¸ **å¼€å‘å‹å¥½** - æä¾›è°ƒè¯•å·¥å…·å’ŒçŠ¶æ€æ˜¾ç¤º
- ğŸ“¦ **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒ
- ğŸ”¥ **çƒ­æ›´æ–°æ”¯æŒ** - é…ç½®å˜æ›´æ—¶è‡ªåŠ¨æ›´æ–°

## ğŸ“¦ å®‰è£…

```bash
npm install vite-plugin-preloader
# æˆ–
yarn add vite-plugin-preloader
# æˆ–
pnpm add vite-plugin-preloader
# æˆ–
bun add vite-plugin-preloader
```

## ğŸš€ ä½¿ç”¨

### åŸºç¡€é…ç½®

```js
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import preloader from 'vite-plugin-preloader'

export default defineConfig({
  plugins: [
    vue(),
    preloader({
      routes: [
        { 
          path: '/calendar', 
          reason: 'æ—¥å†ç»„ä»¶åŒ…å«å¤§å‹åº“',
          priority: 1 
        },
        { 
          path: '/charts', 
          component: '@/views/charts/index.vue',
          reason: 'å›¾è¡¨é¡µé¢è¾ƒé‡', 
          priority: 1 
        }
      ]
    })
  ]
})
```

å°±è¿™æ ·ï¼æ— éœ€å…¶ä»–ä»»ä½•ä»£ç ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨ï¼š
- ğŸ¯ ç”Ÿæˆé¢„åŠ è½½é€»è¾‘
- ğŸ“¦ æ³¨å…¥åˆ°åº”ç”¨ä¸­
- ğŸ¨ æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- ğŸ› ï¸ æä¾›è°ƒè¯•å·¥å…·

### å®Œæ•´é…ç½®ç¤ºä¾‹

```js
preloader({
  routes: [
    // ğŸ”¥ é«˜ä¼˜å…ˆçº§ - æ ¸å¿ƒé¡µé¢
    { 
      path: '/dashboard', 
      component: '@/views/dashboard/index.vue',
      reason: 'ä¸»ä»ªè¡¨ç›˜ï¼Œç”¨æˆ·è®¿é—®é¢‘ç‡æœ€é«˜',
      priority: 1 
    },
    
    // âš¡ ä¸­ä¼˜å…ˆçº§ - å¸¸ç”¨é¡µé¢
    { 
      path: '/calendar', 
      reason: 'æ—¥å†ç»„ä»¶åŒ…å« @fullcalendar å…¨å®¶æ¡¶(~500KB)',
      priority: 2 
    },
    
    // ğŸ“Š ä½ä¼˜å…ˆçº§ - é‡å‹å·¥å…·é¡µé¢
    { 
      path: '/reports', 
      component: '@/views/reports/index.vue',
      reason: 'æŠ¥è¡¨é¡µé¢åŒ…å« echarts + d3 å›¾è¡¨åº“(~800KB)',
      priority: 3 
    }
  ],
  delay: 2000,                    // å»¶è¿Ÿæ—¶é—´
  showStatus: true,               // æ˜¾ç¤ºçŠ¶æ€
  statusPosition: 'bottom-right', // çŠ¶æ€ä½ç½®
  debug: true                     // å¼€å‘è°ƒè¯•
})
```

## ğŸ¯ é…ç½®é€‰é¡¹

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `routes` | `PreloadRoute[]` | `[]` | é¢„åŠ è½½è·¯ç”±é…ç½® |
| `delay` | `number` | `2000` | å»¶è¿Ÿæ—¶é—´(ms) |
| `showStatus` | `boolean` | `true` | æ˜¾ç¤ºçŠ¶æ€ |
| `statusPosition` | `string` | `'bottom-right'` | çŠ¶æ€ä½ç½® |
| `debug` | `boolean` | `false` | å¼€å‘è°ƒè¯• |

### PreloadRoute é…ç½®

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `path` | `string` | âœ… | è·¯ç”±è·¯å¾„ |
| `component` | `string` | âŒ | ç»„ä»¶è·¯å¾„ï¼ˆä¸å¡«è‡ªåŠ¨æ¨æ–­ï¼‰ |
| `reason` | `string` | âŒ | é¢„åŠ è½½åŸå› è¯´æ˜ |
| `priority` | `number` | âŒ | ä¼˜å…ˆçº§ 1-5ï¼ˆæ•°å­—è¶Šå°è¶Šå…ˆåŠ è½½ï¼‰ |

## ğŸ› ï¸ å¼€å‘è°ƒè¯•

å¼€å‘ç¯å¢ƒä¸‹ï¼Œæµè§ˆå™¨æ§åˆ¶å°å¯ç”¨ï¼š

```js
// æŸ¥çœ‹é¢„åŠ è½½ç»Ÿè®¡
window.preloaderDebug.stats()

// æ£€æŸ¥æŒ‡å®šè·¯ç”±çŠ¶æ€  
window.preloaderDebug.check('/calendar')

// é‡æ–°å¼€å§‹é¢„åŠ è½½
window.preloaderDebug.restart()

// æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
window.preloaderDebug.help()
```

## ğŸ“Š æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹

```
ğŸš€ é¢„åŠ è½½æ’ä»¶å·²å¯ç”¨ï¼Œé…ç½®äº† 3 ä¸ªè·¯ç”±
ğŸš€ [é¢„åŠ è½½] å¼€å§‹é¢„åŠ è½½ 3 ä¸ªé¡µé¢
âœ… [é¢„åŠ è½½] /calendar (234ms) - æ—¥å†ç»„ä»¶åŒ…å« @fullcalendar å…¨å®¶æ¡¶
âœ… [é¢„åŠ è½½] /charts (456ms) - å›¾è¡¨é¡µé¢åŒ…å« echartsã€@antv/x6
âœ… [é¢„åŠ è½½] /reports (678ms) - æŠ¥è¡¨é¡µé¢åŒ…å« echarts + d3 å›¾è¡¨åº“
ğŸ‰ [é¢„åŠ è½½] å®Œæˆ! è€—æ—¶ 1234ms
```

## ğŸ¨ çŠ¶æ€æ˜¾ç¤º

æ’ä»¶ä¼šåœ¨é¡µé¢å³ä¸‹è§’æ˜¾ç¤ºé¢„åŠ è½½çŠ¶æ€ï¼š

```
ğŸ”„ æ­£åœ¨ä¼˜åŒ–é¡µé¢... 2/3
```

çŠ¶æ€ä½ç½®å¯é€šè¿‡ `statusPosition` é…ç½®ï¼š
- `'top-left'` - å·¦ä¸Šè§’
- `'top-right'` - å³ä¸Šè§’  
- `'bottom-left'` - å·¦ä¸‹è§’
- `'bottom-right'` - å³ä¸‹è§’ï¼ˆé»˜è®¤ï¼‰

## ğŸ”§ æœ€ä½³å®è·µ

### 1. ä¼˜å…ˆçº§è®¾ç½®å»ºè®®

```js
// ä¼˜å…ˆçº§ 1: æ ¸å¿ƒä¸šåŠ¡é¡µé¢ï¼ˆé«˜é¢‘è®¿é—® + å¤§ä½“ç§¯ï¼‰
{ path: '/dashboard', priority: 1 }

// ä¼˜å…ˆçº§ 2: å¸¸ç”¨åŠŸèƒ½é¡µé¢ï¼ˆä¸­é¢‘è®¿é—® + ä¸­ä½“ç§¯ï¼‰
{ path: '/calendar', priority: 2 }

// ä¼˜å…ˆçº§ 3: ä¸“ä¸šå·¥å…·é¡µé¢ï¼ˆä½é¢‘è®¿é—® + å¤§ä½“ç§¯ï¼‰
{ path: '/reports', priority: 3 }
```

### 2. ç»„ä»¶è·¯å¾„è‡ªåŠ¨æ¨æ–­

å¦‚æœä¸æŒ‡å®š `component`ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨æ¨æ–­ï¼š

```js
{ path: '/user-profile' }
// è‡ªåŠ¨æ¨æ–­ä¸º: @/views/user-profile/index.vue

{ path: '/admin/users' }  
// è‡ªåŠ¨æ¨æ–­ä¸º: @/views/admin-users/index.vue
```

### 3. é¢„åŠ è½½åŸå› è¯´æ˜

å»ºè®®åœ¨ `reason` ä¸­è¯´æ˜é¢„åŠ è½½çš„å…·ä½“åŸå› ï¼š

```js
{
  path: '/calendar',
  reason: 'æ—¥å†ç»„ä»¶åŒ…å« @fullcalendar å…¨å®¶æ¡¶(~500KB)',
  priority: 2
}
```

## ğŸš€ å·¥ä½œåŸç†

1. **æ„å»ºæ—¶åˆ†æ** - æ’ä»¶åœ¨æ„å»ºæ—¶è§£æé…ç½®
2. **ä»£ç ç”Ÿæˆ** - è‡ªåŠ¨ç”Ÿæˆé¢„åŠ è½½é€»è¾‘ä»£ç 
3. **è™šæ‹Ÿæ¨¡å—** - åˆ›å»º `virtual:preloader` æ¨¡å—
4. **è‡ªåŠ¨æ³¨å…¥** - å°†é¢„åŠ è½½ä»£ç æ³¨å…¥åˆ°åº”ç”¨ä¸­
5. **æ™ºèƒ½è°ƒåº¦** - æŒ‰ä¼˜å…ˆçº§ä¸²è¡Œé¢„åŠ è½½ï¼Œé¿å…é˜»å¡

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

MIT Â© ChenYu

---

**ğŸ¯ ä¸€è¡Œé…ç½®ï¼Œæè‡´æ€§èƒ½ï¼è®©ä½ çš„ Vue åº”ç”¨é£èµ·æ¥ï¼** ğŸš€